(function(wc_order_attribution){'use strict';const params=wc_order_attribution.params;const $=document.querySelector.bind(document);wc_order_attribution.sbjsDataToSchema=(obj)=>({type:obj.current.typ,url:obj.current_add.rf,utm_campaign:obj.current.cmp,utm_source:obj.current.src,utm_medium:obj.current.mdm,utm_content:obj.current.cnt,utm_id:obj.current.id,utm_term:obj.current.trm,session_entry:obj.current_add.ep,session_start_time:obj.current_add.fd,session_pages:obj.session.pgs,session_count:obj.udata.vst,user_agent:obj.udata.uag,});function initOrderTracking(){if(params.allowTracking==='no'){removeTrackingCookies();return;}
sbjs.init({lifetime:Number(params.lifetime),session_length:Number(params.session),timezone_offset:'0',});const setFields=()=>{if(sbjs.get){for(const[key,value]of Object.entries(wc_order_attribution.sbjsDataToSchema(sbjs.get))){$(`input[name="${params.prefix}${key}"]`).value=value;}}};if($('form.woocommerce-checkout')!==null){const previousInitCheckout=document.body.oninit_checkout;document.body.oninit_checkout=()=>{setFields();previousInitCheckout&&previousInitCheckout();};}
if($('.woocommerce form.register')!==null){setFields();}}
wc_order_attribution.setAllowTrackingConsent=(allow)=>{if(!allow){return;}
params.allowTracking='yes';initOrderTracking();}
function removeTrackingCookies(){const domain=window.location.hostname;const sbCookies=['sbjs_current','sbjs_current_add','sbjs_first','sbjs_first_add','sbjs_session','sbjs_udata','sbjs_migrations','sbjs_promo'];sbCookies.forEach((name)=>{document.cookie=`${name}=; path=/; max-age=-999; domain=.${domain};`;});}
initOrderTracking();}(window.wc_order_attribution));